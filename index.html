<meta name="viewport" content="width=device-width">
<script>
var websocket = new WebSocket("ws://bjm904.bjm904.com:5987");
websocket.onopen=function(evt){
	//websocket.send("off");
};
websocket.onclose=function(evt){
	
};
websocket.onmessage=function(evt){
	var com=JSON.parse(evt.data);
	if(com.status) status=com.status;
	update();
};
websocket.onerror=function(evt){
	
};
String.prototype.replaceAt=function(index, character) {
    return this.substr(0, index) + character + this.substr(index+1);
}
var status="00000000000";
function update(){
	for(var i=0;i<10;i++){
		document.getElementById(i).value=(status[i]==1)?"On":"Off";
	}
}
function toggle(num){
	status=status.replaceAt(num, (status[num]==1)?0:1);
	websocket.send(JSON.stringify({status:status}));
}
var array1=[
	"10000000010",
	"01000000100",
	"00100001000",
	"00010010000",
	"00001100000",
	"00010010000",
	"00100001000",
	"01000000100",
];
var array2=[
	"10000000000",
	"01000000000",
	"00100000000",
	"00010000000",
	"00001000000",
	"00000100000",
	"00000010000",
	"00000001000",
	"00000000100",
	"00000000010",
	"00000000100",
	"00000001000",
	"00000010000",
	"00000100000",
	"00001000000",
	"00010000000",
	"00100000000",
	"01000000000",
];
var array=array2;
var speed=150;
function play(){
	for(var i=0;i<array.length;i++){
		doTimeout(i)
	}
	setTimeout(function(){
		play();
	},speed*array.length);
}
function doTimeout(i){
	setTimeout(function(){
		websocket.send(JSON.stringify({status:array[i]}));
	},speed*i);
}
</script>
<style>
input{
	width:100%;
	height:9%;
}
</style>
<input type="button" id="0" onclick="toggle(0)"></input><br>
<input type="button" id="1" onclick="toggle(1)"></input><br>
<input type="button" id="2" onclick="toggle(2)"></input><br>
<input type="button" id="3" onclick="toggle(3)"></input><br>
<input type="button" id="4" onclick="toggle(4)"></input><br>
<input type="button" id="5" onclick="toggle(5)"></input><br>
<input type="button" id="6" onclick="toggle(6)"></input><br>
<input type="button" id="7" onclick="toggle(7)"></input><br>
<input type="button" id="8" onclick="toggle(8)"></input><br>
<input type="button" id="9" onclick="toggle(9)"></input><br>
<br>
<input type="button" id="play" value="Play" onclick="play()"></input><br>